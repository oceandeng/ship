"use strict";var sW=document.documentElement.clientWidth,sH=document.documentElement.clientHeight,Game=new function(){this.initialize=function(a){return sW=document.documentElement.clientWidth,sH=document.documentElement.clientHeight,this.canvas=document.createElement("canvas"),this.canvas.width=sW,this.canvas.height=sH,this.canvas.style.position="fixed",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.zIndex="-1",this.width=sW,this.height=sH,document.body.appendChild(this.canvas),Game.canvas.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.ctx=this.canvas.getContext&&this.canvas.getContext("2d"),this.ctx?(this.playerOffset=10,this.canvasMultiplier=1,this.setupMobile(),this.loop(),void(a&&a())):alert("Please upgrade your brower to play")},this.resize=function(a){sW=document.documentElement.clientWidth,sH=document.documentElement.clientHeight,this.canvas.width=sW,this.canvas.height=sH,this.canvas.style.position="fixed",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.zIndex="-1",this.width=sW,this.height=sH,a&&a()};var a=[];this.loop=function(){for(var b=.03,c=0,d=a.length;d>c;c++)a[c]&&(a[c].step(b),a[c]&&a[c].draw(Game.ctx));setTimeout(Game.loop,30)},this.setBoard=function(b,c){a[b]=c},this.setupMobile=function(){var a=!!("ontouchstart"in window),b=window.innerWidth,c=window.innerHeight;return a&&(this.mobile=!0),screen.width>=1280||!a?!1:(b>c&&(alert("Please rotate the device and then click OK"),b=window.innerWidth,c=window.innerHeight),window.scrollTo(0,1),c=window.innerHeight+2,c>=1.75*this.canvas.height||b>=1.75*this.canvas.height?(this.canvasMultiplier=2,this.canvas.width=b/2,this.canvas.height=c/2,this.canvas.style.width=b+"px",this.canvas.style.height=c+"px"):(this.canvas.width=b,this.canvas.height=c),this.canvas.style.popsition="absolute",this.canvas.style.left="0px",void(this.canvas.style.top="0px"))}},startGame=function(){Game.setBoard(0,new Starfield(10,.4,100,!0)),Game.setBoard(1,new Starfield(20,.6,100)),Game.setBoard(2,new Starfield(50,1,50))};window.addEventListener("load",function(){Game.initialize(startGame)},!1),window.addEventListener("resize",function(){Game.resize(startGame)});var Starfield=function(a,b,c,d){var e=document.createElement("canvas");e.width=Game.width,e.height=Game.height;var f=e.getContext("2d"),g=0;d&&(f.fillStyle="#000",f.fillRect(0,0,e.width,e.height)),f.fillStyle="#9386ff",f.globalAlpha=b;for(var h=0;c>h;h++)f.fillRect(Math.floor(Math.random()*e.width),Math.floor(Math.random()*e.height),2,2);this.draw=function(a){var b=Math.floor(g),c=e.height-b;b>0&&a.drawImage(e,0,c,e.width,b,0,0,e.width,b),c>0&&a.drawImage(e,0,0,e.width,c,0,b,e.width,c)},this.step=function(b){g+=b*a,g%=e.height}};