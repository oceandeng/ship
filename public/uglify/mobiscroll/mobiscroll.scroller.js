!function(a,b,c,d){var e,f=a.mobiscroll,g=f.classes,h=f.util,i=h.jsPrefix,j=h.has3d,k=h.hasFlex,l=h.getCoord,m=h.constrain,n=h.testTouch;f.presetShort("scroller","Scroller",!1),g.Scroller=function(b,f,o){function p(b){!n(b,this)||e||U||N||y(this)||(b.preventDefault(),b.stopPropagation(),e=!0,O="clickpick"!=R.mode,aa=a(".dw-ul",this),A(aa),V=ga[ba]!==d,Z=V?C(aa):ha[ba],W=l(b,"Y"),X=new Date,Y=W,E(aa,ba,Z,.001),O&&aa.closest(".dwwl").addClass("dwa"),"mousedown"===b.type&&a(c).on("mousemove",q).on("mouseup",r))}function q(a){e&&O&&(a.preventDefault(),a.stopPropagation(),Y=l(a,"Y"),(Math.abs(Y-W)>3||V)&&(E(aa,ba,m(Z+(W-Y)/P,$-1,_+1)),V=!0))}function r(b){if(e){var d,f,g=new Date-X,h=m(Math.round(Z+(W-Y)/P),$-1,_+1),i=h,k=aa.offset().top;if(b.stopPropagation(),e=!1,"mouseup"===b.type&&a(c).off("mousemove",q).off("mouseup",r),j&&300>g?(d=(Y-W)/g,f=d*d/R.speedUnit,0>Y-W&&(f=-f)):f=Y-W,V)i=m(Math.round(Z-f/P),$,_),g=d?Math.max(.1,Math.abs((i-h)/d)*R.timeUnit):.1;else{var l=Math.floor((Y-k)/P),n=a(a(".dw-li",aa)[l]),o=n.hasClass("dw-v"),p=O;if(g=.1,T("onValueTap",[n])!==!1&&o?i=l:p=!0,p&&o&&(n.addClass("dw-hl"),setTimeout(function(){n.removeClass("dw-hl")},100)),!Q&&(R.confirmOnTap===!0||R.confirmOnTap[ba])&&n.hasClass("dw-sel"))return void ea.select()}O&&I(aa,ba,i,0,g,!0)}}function s(b){N=a(this),n(b,this)&&x(b,N.closest(".dwwl"),N.hasClass("dwwbp")?J:K),"mousedown"===b.type&&a(c).on("mouseup",t)}function t(b){N=null,U&&(clearInterval(da),U=!1),"mouseup"===b.type&&a(c).off("mouseup",t)}function u(b){38==b.keyCode?x(b,a(this),K):40==b.keyCode&&x(b,a(this),J)}function v(){U&&(clearInterval(da),U=!1)}function w(b){if(!y(this)){b.preventDefault(),b=b.originalEvent||b;var c=b.deltaY||b.wheelDelta||b.detail,d=a(".dw-ul",this);A(d),E(d,ba,m(((0>c?-20:20)-ia[ba])/P,$-1,_+1)),clearTimeout(S),S=setTimeout(function(){I(d,ba,Math.round(ha[ba]),c>0?1:2,.1)},200)}}function x(a,b,c){if(a.stopPropagation(),a.preventDefault(),!U&&!y(b)&&!b.hasClass("dwa")){U=!0;var d=b.find(".dw-ul");A(d),clearInterval(da),da=setInterval(function(){c(d)},R.delay),c(d)}}function y(b){if(a.isArray(R.readonly)){var c=a(".dwwl",M).index(b);return R.readonly[c]}return R.readonly}function z(b){var c='<div class="dw-bf">',d=ja[b],e=1,f=d.labels||[],g=d.values||[],h=d.keys||g;return a.each(g,function(a,b){e%20===0&&(c+='</div><div class="dw-bf">'),c+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+h[a]+'"data-date="'+g[h[a]]+'"'+(f[a]?' aria-label="'+f[a]+'"':"")+' style="height:'+P+"px;line-height:"+P+'px;"><div class="dw-i"'+(ca>1?' style="line-height:'+Math.round(P/ca)+"px;font-size:"+Math.round(P/ca*.8)+'px;"':"")+">"+b+"</div></div>",e++}),c+="</div>"}function A(b){Q=b.closest(".dwwl").hasClass("dwwms"),$=a(".dw-li",b).index(a(Q?".dw-li":".dw-v",b).eq(0)),_=Math.max($,a(".dw-li",b).index(a(Q?".dw-li":".dw-v",b).eq(-1))-(Q?R.rows-("scroller"==R.mode?1:3):0)),ba=a(".dw-ul",M).index(b)}function B(a){var c=R.headerText;return c?"function"==typeof c?c.call(b,a):c.replace(/\{value\}/i,a):""}function C(a){return Math.round(-h.getPosition(a,!0)/P)}function D(a,b){clearTimeout(ga[b]),delete ga[b],a.closest(".dwwl").removeClass("dwa")}function E(a,b,c,d,e){var f=-c*P,g=a[0].style;f==ia[b]&&ga[b]||(ia[b]=f,j?(g[i+"Transition"]=h.prefix+"transform "+(d?d.toFixed(3):0)+"s ease-out",g[i+"Transform"]="translate3d(0,"+f+"px,0)"):g.top=f+"px",ga[b]&&D(a,b),d&&e&&(a.closest(".dwwl").addClass("dwa"),ga[b]=setTimeout(function(){D(a,b)},1e3*d)),ha[b]=c)}function F(b,c,d,e,f){var g,h=a('.dw-li[data-val="'+b+'"]',c),i=a(".dw-li",c),j=i.index(h),k=i.length;if(e)A(c);else if(!h.hasClass("dw-v")){for(var l=h,n=h,o=0,p=0;j-o>=0&&!l.hasClass("dw-v");)o++,l=i.eq(j-o);for(;k>j+p&&!n.hasClass("dw-v");)p++,n=i.eq(j+p);(o>p&&p&&2!==d||!o||0>j-o||1==d)&&n.hasClass("dw-v")?(h=n,j+=p):(h=l,j-=o)}return g=h.hasClass("dw-sel"),f&&(e||(a(".dw-sel",c).removeAttr("aria-selected"),h.attr("aria-selected","true")),a(".dw-sel",c).removeClass("dw-sel"),h.addClass("dw-sel")),{selected:g,v:e?m(j,$,_):j,val:h.hasClass("dw-v")||e?h.attr("data-val"):null}}function G(b,c,d,e,f){var g,h=a('.dw-li[data-val="'+b+'"]',c),i=a(".dw-li",c),j=i.index(h),k=i.length;if(e)A(c);else if(!h.hasClass("dw-v")){for(var l=h,n=h,o=0,p=0;j-o>=0&&!l.hasClass("dw-v");)o++,l=i.eq(j-o);for(;k>j+p&&!n.hasClass("dw-v");)p++,n=i.eq(j+p);(o>p&&p&&2!==d||!o||0>j-o||1==d)&&n.hasClass("dw-v")?(h=n,j+=p):(h=l,j-=o)}return g=h.hasClass("dw-sel"),f&&(e||(a(".dw-sel",c).removeAttr("aria-selected"),h.attr("aria-selected","true")),a(".dw-sel",c).removeClass("dw-sel"),h.addClass("dw-sel")),{selected:g,v:e?m(j,$,_):j,val:h.hasClass("dw-v")||e?h.attr("data-date"):null}}function H(b,c,e,f,g){T("validate",[M,c,b,f])!==!1&&(a(".dw-ul",M).each(function(e){var h=a(this),i=h.closest(".dwwl").hasClass("dwwms"),j=e==c||c===d,k=F(ea._tempWheelArray[e],h,f,i,!0),l=G(ea._tempWheelArray[e],h,f,i,!0),m=k.selected;m&&!j||(ea._tempWheelArray[e]=k.val,ea._tempWheelDateArray[e]=l.val,E(h,e,k.v,j?b:.1,j?g:!1))}),T("onValidated",[]),ea._tempValue=R.formatValue(ea._tempWheelArray,ea),ea.live&&(ea._hasValue=e||ea._hasValue,L(e,e,0,!0)),ea._header.html(B(ea._tempValue)),e&&T("onChange",[ea._tempValue]))}function I(b,c,d,e,f,g){d=m(d,$,_),ea._tempWheelArray[c]=a(".dw-li",b).eq(d).attr("data-val"),ea._tempWheelDateArray[c]=a(".dw-li",b).eq(d).attr("data-date"),E(b,c,d,f,g),setTimeout(function(){H(f,c,!0,e,g)},10)}function J(a){var b=ha[ba]+1;I(a,ba,b>_?$:b,1,.1)}function K(a){var b=ha[ba]-1;I(a,ba,$>b?_:b,2,.1)}function L(a,b,c,d,e){ea._isVisible&&!d&&H(c),ea._tempValue=R.formatValue(ea._tempWheelArray,ea),ea._tempDateValue=R.formatValue(ea._tempWheelDateArray,ea),e||(ea._wheelArray=ea._tempWheelArray.slice(0),ea._value=ea._hasValue?ea._tempValue:null),a&&(T("onValueFill",[ea._hasValue?ea._tempDateValue:"",b]),ea._isInput&&fa.val(ea._hasValue?ea._tempValue:""),b&&(ea._preventChange=!0,fa.change()))}var M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea=this,fa=a(b),ga={},ha={},ia={},ja=[];g.Frame.call(this,b,f,!0),ea.setVal=ea._setVal=function(c,e,f,g,h){ea._hasValue=null!==c&&c!==d,ea._tempWheelArray=a.isArray(c)?c.slice(0):R.parseValue.call(b,c,ea)||[],L(e,f===d?e:f,h,!1,g)},ea.getVal=ea._getVal=function(a){var b=ea._hasValue||a?ea[a?"_tempValue":"_value"]:null;return h.isNumeric(b)?+b:b},ea.setArrayVal=ea.setVal,ea.getArrayVal=function(a){return a?ea._tempWheelArray:ea._wheelArray},ea.setValue=function(a,b,c,d,e){ea.setVal(a,b,e,d,c)},ea.getValue=ea.getArrayVal,ea.changeWheel=function(b,c,e){if(M){var f=0,g=b.length;a.each(R.wheels,function(h,i){return a.each(i,function(h,i){return a.inArray(f,b)>-1&&(ja[f]=i,a(".dw-ul",M).eq(f).html(z(f)),g--,!g)?(ea.position(),H(c,d,e),!1):void f++}),g?void 0:!1})}},ea.getValidCell=F,ea.scroll=E,ea._generateContent=function(){var b,c="",e=0;return a.each(R.wheels,function(f,g){c+='<div class="mbsc-w-p dwc'+("scroller"!=R.mode?" dwpm":" dwsc")+(R.showLabel?"":" dwhl")+'"><div class="dwwc"'+(R.maxWidth?"":' style="max-width:600px;"')+">"+(k?"":'<table class="dw-tbl" cellpadding="0" cellspacing="0"><tr>'),a.each(g,function(a,f){ja[e]=f,b=f.label!==d?f.label:a,c+="<"+(k?"div":"td")+' class="dwfl" style="'+(R.fixedWidth?"width:"+(R.fixedWidth[e]||R.fixedWidth)+"px;":(R.minWidth?"min-width:"+(R.minWidth[e]||R.minWidth)+"px;":"min-width:"+R.width+"px;")+(R.maxWidth?"max-width:"+(R.maxWidth[e]||R.maxWidth)+"px;":""))+'"><div class="dwwl dwwl'+e+(f.multiple?" dwwms":"")+'">'+("scroller"!=R.mode?'<div class="dwb-e dwwb dwwbp '+(R.btnPlusClass||"")+'" style="height:'+P+"px;line-height:"+P+'px;"><span>+</span></div><div class="dwb-e dwwb dwwbm '+(R.btnMinusClass||"")+'" style="height:'+P+"px;line-height:"+P+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+b+'</div><div tabindex="0" aria-live="off" aria-label="'+b+'" role="listbox" class="dwww"><div class="dww" style="height:'+R.rows*P+'px;"><div class="dw-ul" style="margin-top:'+(f.multiple?"scroller"==R.mode?0:P:R.rows/2*P-P/2)+'px;">',c+=z(e)+'</div></div><div class="dwwo"></div></div><div class="dwwol"'+(R.selectedLineHeight?' style="height:'+P+"px;margin-top:-"+(P/2+(R.selectedLineBorder||0))+'px;"':"")+"></div></div>"+(k?"</div>":"</td>"),e++}),c+=(k?"":"</tr></table>")+"</div></div>"}),c},ea._attachEvents=function(a){a.on("keydown",".dwwl",u).on("keyup",".dwwl",v).on("touchstart mousedown",".dwwl",p).on("touchmove",".dwwl",q).on("touchend",".dwwl",r).on("touchstart mousedown",".dwwb",s).on("touchend",".dwwb",t),R.mousewheel&&a.on("wheel mousewheel",".dwwl",w)},ea._markupReady=function(a){M=a,H()},ea._fillValue=function(){ea._hasValue=!0,L(!0,!0,0,!0)},ea._readValue=function(){var a=fa.val()||"";""!==a&&(ea._hasValue=!0),ea._tempWheelArray=ea._hasValue&&ea._wheelArray?ea._wheelArray.slice(0):R.parseValue.call(b,a,ea)||[],ea._tempWheelDateArray=ea._hasValue&&ea._wheelArray?ea._wheelArray.slice(0):R.parseValue.call(b,a,ea)||[],L()},ea._processSettings=function(){R=ea.settings,T=ea.trigger,P=R.height,ca=R.multiline,ea._isLiquid="liquid"===(R.layout||(/top|bottom/.test(R.display)&&1==R.wheels.length?"liquid":"")),R.formatResult&&(R.formatValue=R.formatResult),ca>1&&(R.cssClass=(R.cssClass||"")+" dw-ml"),"scroller"!=R.mode&&(R.rows=Math.max(3,R.rows))},ea._selectedValues={},o||ea.init(f)},g.Scroller.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_hasPreset:!0,_class:"scroller",_defaults:a.extend({},g.Frame.prototype._defaults,{minWidth:80,height:40,rows:1,multiline:1,delay:300,readonly:!1,showLabel:!0,confirmOnTap:!0,wheels:[],mode:"scroller",preset:"",speedUnit:.0012,timeUnit:.08,formatValue:function(a){return a.join(" ")},parseValue:function(b,c){var e,f,g=[],h=[],i=0;return null!==b&&b!==d&&(g=(b+"").split(" ")),a.each(c.settings.wheels,function(b,c){a.each(c,function(b,c){f=c.keys||c.values,e=f[0],a.each(f,function(a,b){return g[i]==b?(e=b,!1):void 0}),h.push(e),i++})}),h}})},f.themes.scroller=f.themes.frame}(jQuery,window,document);